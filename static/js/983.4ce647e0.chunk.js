"use strict";(self.webpackChunkspyfall=self.webpackChunkspyfall||[]).push([[983],{334:function(e,t,n){n.d(t,{Z:function(){return a}});n(2791);var r=n(184),a=function(e){var t=e.handleClick,n=e.text,a=e.svg;return(0,r.jsxs)("button",{className:"cta",onClick:t,children:[(0,r.jsx)("span",{children:n}),a||(0,r.jsxs)("svg",{width:"13px",height:"10px",viewBox:"0 0 13 10",children:[(0,r.jsx)("path",{d:"M1,5 L11,5"}),(0,r.jsx)("polyline",{points:"8 1 12 5 8 9"})]})]})}},1105:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(1413),a=n(4925),o=(n(2791),n(184)),s=["value","label","onChange"],i=function(e){var t=e.value,n=e.label,i=e.onChange,u=(0,a.Z)(e,s);return(0,o.jsxs)("div",{className:"inputBox",children:[(0,o.jsx)("input",(0,r.Z)({type:"text",required:"required",value:t,onChange:function(e){var t=e.target.value;i(t)}},u)),(0,o.jsx)("span",{children:n})]})}},5063:function(e,t,n){n.d(t,{db:function(){return s}});var r=n(2426),a=n(3014),o=(0,r.ZF)({apiKey:"AIzaSyAGZmJhikusrkvfc0pGZJkZ4_zTItpnyyY",authDomain:"my-test-project-92507.firebaseapp.com",projectId:"my-test-project-92507",storageBucket:"my-test-project-92507.appspot.com",messagingSenderId:"909817834075",appId:"1:909817834075:web:76cbbb2ea960e361aded7e"}),s=(0,a.ad)(o)},8637:function(e,t,n){var r;n.d(t,{n:function(){return p}});var a=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(a)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var i=function(e){return"string"===typeof e&&s.test(e)},u=[],c=0;c<256;++c)u.push((c+256).toString(16).substr(1));var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!i(n))throw TypeError("Stringified UUID is invalid");return n};var l=function(e,t,n){var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return d(r)},p=function(){return window.localStorage.getItem("uuid")||window.localStorage.setItem("uuid",l()),window.localStorage.getItem("uuid")}},2983:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var r=n(885),a=n(2791),o=n(6871),s=n(8637),i=n(4165),u=n(5861),c=n(3014),d=n(5063),l=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";e.length<6;)e+=t[Math.floor(Math.random()*t.length)];return e},p=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t){var n,r,a,o,s,u,p,f,m,g;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uuid,r=t.gameId,a=t.setGameId,o=t.username,s=t.spyCount,u=t.minPlayers,p=t.setErrorMessage,f=t.navigate,e.prev=1,m=[],e.next=5,(0,c.QT)((0,c.JU)(d.db,"game_room_codes","code_array"));case 5:if(!(g=e.sent).exists()){e.next=14;break}for(g.data().codes.forEach((function(e){m.push(e)}));-1!==m.indexOf(r);)a(l());return m.push(r),e.next=12,(0,c.r7)((0,c.JU)(d.db,"game_room_codes/code_array"),{codes:m});case 12:e.next=17;break;case 14:return m.push(r),e.next=17,(0,c.pl)((0,c.JU)(d.db,"game_room_codes/code_array"),{codes:m});case 17:return e.next=19,(0,c.pl)((0,c.JU)(d.db,"game_rooms/".concat(r)),{host_uid:n,spy_count:s,min_player_count:u,player_data_arr:[{username:o,uid:n,points:0}],banned_player_uid:[],game_room_closed:!1,spy_uid:[],location:{title:"",id:""},locations_list:[],ongoing_game:!1,midgame_player_uid:[],vote_exhibited_uid:"",vote_exhibitor_uid:"",vote_score:{}});case 19:f("/game/".concat(r)),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(1),console.error("Error adding document: ",e.t0),p("please try again later");case 26:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t=e.username,n=e.spyCount,r="";t||n?t?n||(r="pick the number of spies"):r="enter username":r="choose your settings",(0,e.setErrorMessage)(r)},m=n(1105),g=n(334),h=n(184),y=function(e){var t=e.gameId,n=e.setGameId,i=(0,o.s0)(),u=(0,a.useState)(""),c=(0,r.Z)(u,2),d=c[0],y=c[1],v="1",x=(0,a.useState)(3),_=(0,r.Z)(x,2),b=_[0],j=_[1],C=(0,a.useState)(""),w=(0,r.Z)(C,2),I=w[0],k=w[1],Z=(0,s.n)();(0,a.useEffect)((function(){n(l())}),[n]),(0,a.useEffect)((function(){parseInt(v)>1?j(5):j(3)}),[v]),(0,a.useEffect)((function(){I&&f({username:d,spyCount:v,setErrorMessage:k})}),[d,v,I]);return(0,h.jsxs)("section",{className:"settings-page",children:[(0,h.jsx)("h2",{className:"game-title",onClick:function(){return i("/")},tabIndex:0,role:"button",children:"SPYFALL"}),(0,h.jsxs)("div",{className:"wrap",children:[(0,h.jsx)(m.Z,{value:d,label:"username",maxLength:15,onChange:function(e){y(e)}}),(0,h.jsx)(g.Z,{handleClick:function(){f({username:d,spyCount:v,setErrorMessage:k}),d&&p({uuid:Z,gameId:t,setGameId:n,username:d,spyCount:v,minPlayers:b,setErrorMessage:k,navigate:i})},text:"Create Game",svg:(0,h.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",children:(0,h.jsx)("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"})})})]}),I?(0,h.jsxs)("p",{className:"info error italic",children:[" ",I]}):(0,h.jsxs)("p",{className:"info italic",children:["you need a minimum of ",b," players to play"]})]})}}}]);
//# sourceMappingURL=983.4ce647e0.chunk.js.map