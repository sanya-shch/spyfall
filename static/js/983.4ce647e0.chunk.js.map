{"version":3,"file":"static/js/983.4ce647e0.chunk.js","mappings":"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","sources":["components/CircleButton/index.js","components/Input/index.js","firebase.js","../node_modules/uuid/dist/esm-browser/rng.js","../node_modules/uuid/dist/esm-browser/regex.js","../node_modules/uuid/dist/esm-browser/stringify.js","../node_modules/uuid/dist/esm-browser/validate.js","../node_modules/uuid/dist/esm-browser/v4.js","helpers/userId.js","screens/settings/helpers.js","screens/settings/index.js","screens/settings/Settings.js"],"sourcesContent":["import React from \"react\";\n\nimport \"./style.css\";\n\nconst CircleButton = ({ handleClick, text, svg }) => {\n  return (\n    <button className=\"cta\" onClick={handleClick}>\n      <span>{text}</span>\n      {svg || (\n        <svg width=\"13px\" height=\"10px\" viewBox=\"0 0 13 10\">\n          <path d=\"M1,5 L11,5\" />\n          <polyline points=\"8 1 12 5 8 9\" />\n        </svg>\n      )}\n    </button>\n  );\n};\n\nexport default CircleButton;\n","import React from \"react\";\n\nimport \"./style.css\";\n\nconst Input = ({ value, label, onChange, ...restProps }) => {\n  const handleChange = (event) => {\n    const { value: eventValue } = event.target;\n    onChange(eventValue);\n  };\n\n  return (\n    <div className=\"inputBox\">\n      <input\n        type=\"text\"\n        required=\"required\"\n        value={value}\n        onChange={handleChange}\n        {...restProps}\n      />\n      <span>{label}</span>\n    </div>\n  );\n};\n\nexport default Input;\n\n// <Input\n//   value={name}\n//   label={\"Name\"}\n//   onChange={setName}\n// />\n","import { initializeApp } from \"firebase/app\";\nimport { getFirestore } from \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAGZmJhikusrkvfc0pGZJkZ4_zTItpnyyY\",\n  authDomain: \"my-test-project-92507.firebaseapp.com\",\n  projectId: \"my-test-project-92507\",\n  storageBucket: \"my-test-project-92507.appspot.com\",\n  messagingSenderId: \"909817834075\",\n  appId: \"1:909817834075:web:76cbbb2ea960e361aded7e\",\n};\n\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\n\nexport { db };\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import { v4 as uuidv4 } from \"uuid\";\n\nconst isUserNew = () => !window.localStorage.getItem(\"uuid\");\n\nconst generateUserId = () => {\n  window.localStorage.setItem(\"uuid\", uuidv4());\n  return window.localStorage.getItem(\"uuid\");\n};\n\nexport const getUserId = () => {\n  if (isUserNew()) {\n    return generateUserId();\n  } else {\n    return window.localStorage.getItem(\"uuid\");\n  }\n};\n","import { doc, getDoc, setDoc, updateDoc } from \"firebase/firestore\";\n\nimport { db } from \"../../firebase\";\n\nexport const getSixLetterCode = () => {\n  let code = \"\";\n  const alphabet = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n  while (code.length < 6) {\n    code += alphabet[Math.floor(Math.random() * alphabet.length)];\n  }\n  return code;\n};\n\nexport const startGame = async ({\n  uuid,\n  gameId,\n  setGameId,\n  username,\n  spyCount,\n  minPlayers,\n  setErrorMessage,\n  navigate,\n}) => {\n  try {\n    // update GameBlock room code list (check for duplicates)\n    let codeArr = [];\n    const codesDoc = await getDoc(doc(db, \"game_room_codes\", \"code_array\"));\n\n    if (codesDoc.exists()) {\n      codesDoc.data().codes.forEach((element) => {\n        codeArr.push(element);\n      });\n      while (codeArr.indexOf(gameId) !== -1) {\n        setGameId(getSixLetterCode());\n      }\n      codeArr.push(gameId);\n      await updateDoc(doc(db, \"game_room_codes/code_array\"), {\n        codes: codeArr,\n      });\n    } else {\n      codeArr.push(gameId);\n      await setDoc(doc(db, \"game_room_codes/code_array\"), {\n        codes: codeArr,\n      });\n    }\n\n    // add GameBlock room\n    await setDoc(doc(db, `game_rooms/${gameId}`), {\n      host_uid: uuid,\n      spy_count: spyCount,\n      min_player_count: minPlayers,\n      player_data_arr: [{ username: username, uid: uuid, points: 0 }],\n      banned_player_uid: [],\n      game_room_closed: false,\n      spy_uid: [],\n      location: { title: \"\", id: \"\" },\n      locations_list: [],\n      ongoing_game: false,\n      midgame_player_uid: [],\n\n      vote_exhibited_uid: \"\",\n      vote_exhibitor_uid: \"\",\n      vote_score: {},\n    });\n\n    // navigate to new Game page\n    navigate(`/game/${gameId}`);\n  } catch (e) {\n    console.error(\"Error adding document: \", e);\n    setErrorMessage(\"please try again later\");\n  }\n};\n\nexport const updateErrorMessage = ({ username, spyCount, setErrorMessage }) => {\n  let error = \"\";\n  if (!username && !spyCount) {\n    error = \"choose your settings\";\n  } else if (!username) {\n    error = \"enter username\";\n  } else if (!spyCount) {\n    error = \"pick the number of spies\";\n  }\n  setErrorMessage(error);\n};\n","import Settings from \"./Settings\";\n\nexport default Settings;\n","import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\n// import { ToastContext } from \"../../components/Toast\";\nimport { getUserId } from \"../../helpers/userId\";\nimport { getSixLetterCode, startGame, updateErrorMessage } from \"./helpers\";\nimport Input from \"../../components/Input\";\nimport CircleButton from \"../../components/CircleButton\";\n\nimport \"./style.css\";\n\nconst Settings = ({ gameId, setGameId }) => {\n  const navigate = useNavigate();\n\n  const [username, setUsername] = useState(\"\");\n  // const [spyCount, setSpyCount] = useState('1');\n  const spyCount = \"1\";\n\n  const [minPlayers, setMinPlayers] = useState(3);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  const uuid = getUserId();\n\n  // const { setToast } = React.useContext(ToastContext);\n  // useEffect(() => {\n  //   setToast({\n  //     message: \"Enter a USERNAME to create a game.\",\n  //     type: 'info',\n  //   });\n  // }, [setToast]);\n\n  useEffect(() => {\n    setGameId(getSixLetterCode());\n  }, [setGameId]);\n\n  useEffect(() => {\n    if (parseInt(spyCount) > 1) {\n      setMinPlayers(5);\n    } else {\n      setMinPlayers(3);\n    }\n  }, [spyCount]);\n\n  useEffect(() => {\n    if (errorMessage) {\n      updateErrorMessage({\n        username,\n        spyCount,\n        setErrorMessage,\n      });\n    }\n  }, [username, spyCount, errorMessage]);\n\n  const handleClickCreateGame = () => {\n    updateErrorMessage({\n      username,\n      spyCount,\n      setErrorMessage,\n    });\n\n    if (username && spyCount) {\n      startGame({\n        uuid,\n        gameId,\n        setGameId,\n        username,\n        spyCount,\n        minPlayers,\n        setErrorMessage,\n        navigate,\n      });\n    }\n  };\n\n  const handleChangeUsername = (value) => {\n    setUsername(value);\n  };\n\n  return (\n    <section className=\"settings-page\">\n      <h2\n        className=\"game-title\"\n        onClick={() => navigate(\"/\")}\n        tabIndex={0}\n        role=\"button\"\n      >\n        SPYFALL\n      </h2>\n      <div className=\"wrap\">\n        <Input\n          value={username}\n          label=\"username\"\n          maxLength={15}\n          onChange={handleChangeUsername}\n        />\n        <CircleButton\n          handleClick={handleClickCreateGame}\n          text=\"Create Game\"\n          svg={\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\">\n              <path d=\"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z\" />\n            </svg>\n          }\n        />\n      </div>\n      {errorMessage ? (\n        <p className=\"info error italic\"> {errorMessage}</p>\n      ) : (\n        <p className=\"info italic\">\n          you need a minimum of {minPlayers} players to play\n        </p>\n      )}\n    </section>\n  );\n};\n\nexport default Settings;\n"],"names":["handleClick","text","svg","className","onClick","width","height","viewBox","d","points","value","label","onChange","restProps","type","required","event","eventValue","target","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","getFirestore","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","Error","uuid","REGEX","byteToHex","i","push","toString","substr","arr","offset","arguments","length","undefined","toLowerCase","validate","TypeError","options","buf","rnds","random","stringify","getUserId","window","localStorage","getItem","setItem","uuidv4","getSixLetterCode","code","alphabet","Math","floor","startGame","gameId","setGameId","username","spyCount","minPlayers","setErrorMessage","navigate","codeArr","getDoc","doc","codesDoc","exists","data","codes","forEach","element","indexOf","updateDoc","setDoc","host_uid","spy_count","min_player_count","player_data_arr","uid","banned_player_uid","game_room_closed","spy_uid","location","title","id","locations_list","ongoing_game","midgame_player_uid","vote_exhibited_uid","vote_exhibitor_uid","vote_score","console","error","updateErrorMessage","useNavigate","useState","setUsername","setMinPlayers","errorMessage","useEffect","parseInt","tabIndex","role","Input","maxLength","CircleButton"],"sourceRoot":""}